#!/usr/bin/env bash
set -euo pipefail

if [ $# -ne 1 ]; then
  echo "Usage: jtext <file.ipynb|file.py>"
  exit 1
fi

file="$1"

if ! command -v jupytext >/dev/null 2>&1; then
  echo "jupytext not found. Install with: pip install jupytext"
  exit 1
fi

case "$file" in
  *.ipynb)
    jupytext --set-formats ipynb,py:percent "$file"
    jupytext --sync "$file"
    ;;
  *.py)
    jupytext --set-formats ipynb,py:percent "$file"
    jupytext --sync "$file"
    ;;
  *)
    echo "Unsupported file type: $file"
    exit 1
    ;;
esac
