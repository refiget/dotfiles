# -- theme (Darwin)
run-shell "~/.config/tmux/scripts/update_theme_color.sh"

# Pane-top UI is disabled to reduce visual split noise.
setw -g pane-border-status off

# Subtle split lines + clear focus using active border only.
set -g pane-border-style fg=#313244
# Active pane border: soft accent (Catppuccin Mocha blue)
set -g pane-active-border-style fg=#89b4fa

set -g status-style "bg=default,fg=#c5c8c6"
# Center the tab strip for a more "browser tabs" feel
set -g status-justify 'centre'
set -g status-left-length 90
set -g status-right-length 140

# Status refresh: dynamic. See scripts/pomo_refresh_interval.sh
# - 1s while pomodoro is active
# - 2s otherwise
run-shell -b '~/.config/tmux/scripts/pomo_refresh_interval.sh'

# UI constants (Catppuccin Mocha-ish palette)
set -g @tab_bg "#1e1e2e"        # base
set -g @tab_text "#cdd6f4"      # text
set -g @tab_subtext "#a6adc8"   # subtext0
set -g @tab_overlay "#6c7086"   # overlay0

# Window list (tabs): subtle separator + consistent padding
setw -g window-status-separator '#[fg=#313244] │ #[default]'
set -g window-status-style "bg=default"
set -g window-status-current-style "bg=default"

# Inactive tabs
set -g window-status-last-style "fg=#{@tab_text},bg=#{@tab_bg}"
setw -g window-status-format "#[fg=#{@tab_overlay}]  #I:#[fg=#{@tab_subtext}]#{=16:#{window_name}}#{?window_activity_flag,#[fg=#ffb86c] •#[fg=#{@tab_subtext}],}#{?window_bell_flag,#[fg=#ff5555,bold] !#[fg=#{@tab_subtext}],}#{?window_zoomed_flag,#[fg=#{@theme_color},bold] Z#[fg=#{@tab_subtext}],}  "

# Active tab: calm pill (single primary emphasis: bg + arrow)
setw -g window-status-current-format "#[fg=#{@tab_text},bg=#{@tab_bg}]  ▸ #[fg=#{@tab_overlay},bg=#{@tab_bg}]#I:#[fg=#{@tab_text},bg=#{@tab_bg}]#{=18:#{window_name}}#{?window_active,,#{?window_activity_flag,#[fg=#ffb86c,bg=#{@tab_bg}] •,}}#{?window_active,,#{?window_bell_flag,#[fg=#ff5555,bg=#{@tab_bg}] !,}}#{?window_zoomed_flag,#[fg=#{@tab_text},bg=#{@tab_bg}] Z,}  #[default]"

# Activity/bell: use foreground cues
setw -g window-status-activity-style "fg=#ffb86c"
setw -g window-status-bell-style "fg=#ff5555,bold"

set-option -g status-left "#(~/.config/tmux/tmux-status/left.sh)  "
set-option -g status-right "#(~/.config/tmux/tmux-status/right.sh)"
