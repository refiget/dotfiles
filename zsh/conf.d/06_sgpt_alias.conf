# shell_gpt (sgpt) shortcuts
#
# Goals:
# - `ds` is the default Q&A command WITH memory (chat id: temp)
#   - supports: ds "question" and cat file | ds
# - `dss` generates AND executes shell commands (non-interactive)
# - `dssn` generates shell commands with interactive choice

# Avoid alias/function name collisions (some configs may already define these)
unalias ds 2>/dev/null
unalias dss 2>/dev/null
unalias dssn 2>/dev/null

# ds: Q&A with memory (always uses chat id "temp")
ds() {
  if [[ -t 0 ]]; then
    # no stdin
    sgpt --chat temp "$*"
  else
    # stdin present
    local stdin
    stdin="$(cat)"
    if [[ -n "$*" ]]; then
      sgpt --chat temp "${stdin}\n\n$*"
    else
      sgpt --chat temp "$stdin"
    fi
  fi
}

# dss: generate + execute shell command (no interaction)
dss() { sgpt --shell --no-interaction "$*"; }

# dssn: generate shell command with interactive choice (Execute/Modify/Describe/Abort)
dssn() { sgpt --shell "$*"; }
