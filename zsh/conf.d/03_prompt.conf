# ============================================================
# Prompt Injection (Left Side)
# ============================================================
# 虚拟环境获取函数
get_venv_prompt() {
  local venv_name="base"
  if [[ -n "$CONDA_DEFAULT_ENV" ]]; then
    venv_name="$CONDA_DEFAULT_ENV"
  elif [[ -n "$VIRTUAL_ENV" ]]; then
    venv_name="$(basename "$VIRTUAL_ENV")"
  fi
  echo "(%F{cyan}${venv_name}%f)"
}

if [[ "$PROMPT" != *"get_venv_prompt"* ]]; then
  PROMPT='$(get_venv_prompt) '"$PROMPT"
fi
