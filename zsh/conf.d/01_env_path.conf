# ============================================================
# Basic Environment & PATH (from reference .zshrc)
# ============================================================

# 1. å¼€å¯å˜é‡åŠ¨æ€åˆ·æ–° (å…³é”®ï¼šè®© Vim å’Œ Venv èƒ½å¤Ÿå®žæ—¶å˜åŒ–)
setopt PROMPT_SUBST  # è‡ªåŠ¨æ›¿æ¢ç‰¹æ®Šå­—ç¬¦

setopt HIST_IGNORE_ALL_DUPS
setopt HIST_IGNORE_SPACE
setopt HIST_REDUCE_BLANKS
setopt HIST_VERIFY
HISTSIZE=5000
SAVEHIST=5000
HISTFILE=~/.zsh_history

setopt CORRECT
setopt AUTO_CD
setopt INTERACTIVE_COMMENTS

# ðŸŒ OS Detection
os_name=$(uname -s)
is_macos=false
is_linux=false
case "$os_name" in
  Darwin) is_macos=true ;;
  Linux)  is_linux=true ;;
esac

# PATH è®¾ç½®
typeset -U path PATH
path=(
  "$HOME/.local/bin"
  "/usr/local/bin"
  "/usr/bin"
  "/bin"
  "/usr/sbin"
  "/sbin"
  $path
)

# Mac: Homebrew shellenv
if [[ -f /opt/homebrew/bin/brew ]]; then
  eval "$(/opt/homebrew/bin/brew shellenv)"
fi
# Linux pacman é¢å¤–è·¯å¾„
if $is_linux && command -v pacman >/dev/null 2>&1; then
  export PATH="/usr/local/sbin:/usr/local/bin:$PATH"
fi

# TexLive path (Mac)
if $is_macos; then
  export PATH="/usr/local/texlive/2025/bin/universal-darwin:$PATH"
fi

export EDITOR="nvim"
export VISUAL="nvim"
export PAGER="less"

autoload -U colors && colors
[[ $- != *i* ]] && return  # only for interactive shells
